{% extends 'layout.html' %}
{% block body %}

<div class="row px-0" id="row0">
  <div class="col">
    <ul class="list-group mb-0">
      <li class="list-group-item d-flex justify-content-between lh-condensed bg-secondary">
        <h3 class="mx-auto text-white">Bill Of Materials Total:<a class="text-warning"> 1,553,222,333 ISK</a></h3>
      </li>
      <li class="list-group-item d-flex justify-content-between lh-condensed">
        <div class="col"></div>
        <div class="col-sm-5"> <!-- this increases or decreases selectbox size -->
          <select id="locations" class="form-control form-control-sm">
            <option selected>Choose...</option>
            <option>Jita</option>
            <option>Pakkon - If I sits, I fits</option>
            <option>Tama - Caldari Business Tribunal</option>
          </select>
        </div>
        <div class="col">
          <input name="fetch" class="btn-sm btn-primary mt-0" type="button" value="Fetch On-Hand Assets">
        </div>
      </li>
    </ul>
  </div>
</div>

<div class="row px-0" id="row1">
  <div class="col">
    <ul class="list-group mb-1">
      <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
        <h4 class="mx-auto">Datacores</h4>
      </li>
      <li class="list-group-item py-0">
        <form>
          <table class="table table-sm table-condensed table-hover table-responsive pl-3">
            <thead>
              <tr>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col">Material</th>
                <th scope="col">QTY</th>
                <th scope="col"><center>Jita Buy Price</th>
              </tr>
            </thead>
            <tbody>
              {% if 'myUser_id' in session %}
              {% set total = namespace(a=0) %}
                {% for item in datacoresInPipeline %}
                <tr>
                  <th scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/{{ item.datacore_id }}_32.png"></th>
                  <td colspan="2">{{ item.datacore }}</td>
                  <td> {{ item.datacore_qty * item.runs }} </td>
                  <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.datacore_cost * item.runs) }}</p></td>
                </tr>
                {% set total.a = total.a + (item.datacore_cost * item.runs) %}
                {% endfor %}
                <tr align="center">
                  <td class="table-active" colspan="5"><h5>Datacore Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                </tr>
              {% endif %}
            </tbody>
          </table>

        </form>
    </div> <!-- col -->

    <div class="col">
      <ul class="list-group mb-1">
        <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
          <h4 class="mx-auto">Planetary Commodities</h4>
        </li>
        <li class="list-group-item py-0">
          <form>
            <table class="table table-sm table-condensed table-hover table-responsive pl-3">
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col"></th>
                  <th scope="col">Material</th>
                  <th scope="col">QTY</th>
                  <th scope="col"><center>Jita Buy Price</th>
                </tr>
              </thead>
              <tbody>
                {% if 'myUser_id' in session %}
                {% set total = namespace(a=0) %}
                  {% for item in planetaryInPipeline %}
                <tr>
                  <th scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/{{item.material_id}}_32.png"></th>
                  <td colspan="2"><p class="mt-1">{{ item.material }}</p></td>
                  <td><p class="mt-1 text-center">{{ item.material_qty  }}</p></td>
                  <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_cost * item.runs) }}</p></td>
                </tr>
                {% set total.a = total.a + (item.material_cost * item.runs) %}
                {% endfor %}
                <tr align="center">
                  <td class="table-active" colspan="5"><h5>Planetary Commodities Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                </tr>
                {% endif %}
              </tbody>
            </table>
          </form>
        </li>
      </div> <!-- col -->

  </div> <!-- row1 -->

  <div class="row px-0" id="row2">
    <div class="col">
      <ul class="list-group mb-1">
        <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
          <h4 class="mx-auto">Advanced Components</h4>
        </li>
        <li class="list-group-item py-0">
          <form>
            <table class="table table-sm table-condensed table-hover table-responsive pl-3">
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col"></th>
                  <th scope="col">Material</th>
                  <th scope="col">QTY</th>
                  <th scope="col">Jita Buy Price</th>
                  <th scope="col">Option</th>
                </tr>
              </thead>
              <tbody>
                {% if 'myUser_id' in session %}
                {% set total = namespace(a=0) %}
                  {% for item in componentInPipeline %}
                <tr>
                  <th scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/{{item.material_id}}_32.png"></th>
                  <td colspan="2"><p class="mt-1">{{ item.material }}</p></td>
                  <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_qty)  }}</p></td>
                  <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_cost * item.runs) }}</p></td>
                  <td>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="{{item.material_id}}" id="buy" checked>
                      <label class="form-check-label" for="buy">Buy</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="{{item.material_id}}" id="build">
                      <label class="form-check-label" for="build">Build</label>
                    </div>
                  </td>
                </tr>
                {% set total.a = total.a + (item.material_cost * item.runs) %}
                {% endfor %}
                <tr align="center">
                  <td class="table-active" colspan="5"><h5>Advanced Components Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                </tr>
                {% endif %}
              </tbody>
            </table>

          </form>
        </li>
      </div> <!-- col -->
      <div class="col">
        <ul class="list-group mb-1">
          <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
            <h4 class="mx-auto">Component Materials</h4>
          </li>
          <li class="list-group-item py-0">
            <form>
              <table class="table table-sm table-condensed table-hover table-responsive pl-3">
                <thead>
                  <tr>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col">Material</th>
                    <th scope="col">QTY</th>
                    <th scope="col"><center>Jita Buy Price</th>
                  </tr>
                </thead>
                <tbody>
                  {% if 'myUser_id' in session %}
                  {% set total = namespace(a=0) %}
                    {% for item in materialInPipeline %}
                    <tr>
                      <th scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/{{item.material_id}}_32.png"></th>
                      <td colspan="2"><p class="mt-1">{{ item.material }}</p></td>
                      <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_qty)  }}</p></td>
                      <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_cost * item.runs) }}</p></td>
                    </tr>
                    {% set total.a = total.a + (item.material_cost * item.runs) %}
                    {% endfor %}
                    <tr align="center">
                      <td class="table-active" colspan="5"><h5>Component Material Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                    </tr>
                    {% endif %}
                </tbody>
              </table>

            </form>
          </li>

        </div> <!-- col -->
    </div> <!-- row2 -->

    <div class="row px-0" id="row3">
      <div class="col">
        <ul class="list-group mb-1">
          <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
            <h4 class="mx-auto">Tech I Products</h4>
          </li>
          <li class="list-group-item py-0">
            <form>
              <table class="table table-sm table-condensed table-hover table-responsive pl-3">
                <thead>
                  <tr>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col">Material</th>
                    <th scope="col">QTY</th>
                    <th scope="col"><center>Jita Buy Price</th>
                    <th scope="col">Option</th>
                  </tr>
                </thead>
                <tbody>
                  {% if 'myUser_id' in session %}
                  {% set total = namespace(a=0) %}
                    {% for item in tech1InPipeline %}
                  <tr>
                    <th scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/{{item.material_id}}_32.png"></th>
                    <td colspan="2"><p class="mt-1">{{ item.material }}</p></td>
                    <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_qty)  }}</p></td>
                    <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_cost * item.runs) }}</p></td>
                    <td>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="{{item.material_id}}" id="buy" checked>
                        <label class="form-check-label" for="buy">Buy</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="{{item.material_id}}" id="build">
                        <label class="form-check-label" for="build">Build</label>
                      </div>
                    </td>
                  </tr>
                  {% set total.a = total.a + (item.material_cost * item.runs) %}
                  {% endfor %}
                  <tr align="center">
                    <td class="table-active" colspan="6"><h5>Tech 1 Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                  </tr>
                  {% endif %}
                </tbody>
              </table>

            </form>
          </li>
        </div> <!-- col -->
        <div class="col">
          <ul class="list-group mb-1">
            <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
              <h4 class="mx-auto">R.A.M. Tools</h4>
            </li>
            <li class="list-group-item py-0">
              <form>
                <table class="table table-sm table-condensed table-hover table-responsive pl-3">
                  <thead>
                    <tr>
                      <th scope="col"></th>
                      <th scope="col"></th>
                      <th scope="col">Material</th>
                      <th scope="col">QTY</th>
                      <th scope="col">Jita Buy Price</th>
                      <th scope="col">Option</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% if 'myUser_id' in session %}
                    {% set total = namespace(a=0) %}
                      {% for item in ramInPipeline %}
                    <tr>
                      <th scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/{{item.material_id}}_32.png"></th>
                      <td colspan="2"><p class="mt-1">{{ item.material }}</p></td>
                      <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_qty)  }}</p></td>
                      <td><p class="mt-1 text-center">{{ "{:,.0f}".format(item.material_cost * item.runs) }}</p></td>
                      <td>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="{{item.material_id}}" id="buy" checked>
                          <label class="form-check-label" for="buy">Buy</label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="{{item.material_id}}" id="build">
                          <label class="form-check-label" for="build">Build</label>
                        </div>
                      </td>
                    </tr>
                    {% set total.a = total.a + (item.material_cost * item.runs) %}
                    {% endfor %}
                    <tr align="center">
                      <td class="table-active" colspan="6"><h5>R.A.M. Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                    </tr>
                    {% endif %}
                  </tbody>
                </table>

              </form>
            </li>

          </div> <!-- col -->
      </div> <!-- row3 -->

      <div class="row px-0" id="row4">
        <div class="col">
          <ul class="list-group mb-1">
            <li class="list-group-item d-flex justify-content-between lh-condensed py-0">
              <h4 class="mx-auto">Minerals</h4>
            </li>
            <li class="list-group-item py-0">
              <form>
                <table class="table table-xlg table-hover">
                  <thead>
                    <tr>
                      <th colspan="2" scope="col">Tritanium</th>
                      <th colspan="2" scope="col">Pyerite</th>
                      <th colspan="2" scope="col">Mexallon</th>
                      <th colspan="2" scope="col">Isogen</th>
                      <th colspan="2" scope="col">Nocxium</th>
                      <th colspan="2" scope="col">Zydrine</th>
                      <th colspan="2" scope="col">Megacyte</th>
                      <th colspan="2" scope="col">Morphite</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/34_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/35_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/36_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/37_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/38_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/39_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/40_64.png"></th>
                      <th colspan="2" scope="row"><img class="img-fluid max-width:auto" src="https://imageserver.eveonline.com/type/11399_64.png"></th>
                    </tr>
                    <tr>
                    {% if 'myUser_id' in session %}
                    {% set total = namespace(a=0) %}
                      {% for item in mineralInPipeline %}
                      <td colspan="2">

                          {% if item.material_id == 34 %}
                            {{ "{:,.0f}".format(item.material_qty) }}
                          {% elif item.material_id == 35 %}
                            {{ "{:,.0f}".format(item.material_qty) }}
                            {% elif item.material_id == 36 %}
                              {{ "{:,.0f}".format(item.material_qty) }}
                              {% elif item.material_id == 37 %}
                                {{ "{:,.0f}".format(item.material_qty) }}
                                {% elif item.material_id == 38 %}
                                  {{ "{:,.0f}".format(item.material_qty) }}
                                  {% elif item.material_id == 39 %}
                                    {{ "{:,.0f}".format(item.material_qty) }}
                                    {% elif item.material_id == 40 %}
                                      {{ "{:,.0f}".format(item.material_qty) }}
                                      {% elif item.material_id == 11399 %}
                                        {{ "{:,.0f}".format(item.material_qty) }}
                                      {% endif %}

                      </td>
                      {% set total.a = total.a + (item.material_cost * item.runs) %}
                      {% endfor %}
                    </tr>
                    <tr align="center">
                      <td colspan="16"><input name="add_mining" class="btn-sm btn-info" type="button" value="Send to Mining Calculator"></td>
                    </tr>
                    <tr align="center">
                      <td class="table-active" colspan="16"><h5>Mineral Jita Buy Value Total: {{ "{:,.0f}".format(total.a) }}</h5></td>
                    </tr>
                    {% endif %}
                  </tbody>
                </table>

              </form>
            </li>
          </ul>
        </div> <!-- col -->
      </div> <!-- row4 -->
{% endblock %}
